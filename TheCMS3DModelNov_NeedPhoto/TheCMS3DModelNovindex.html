<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GMT_Processing</title>
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<base target="_blank">
<link rel="stylesheet" type="text/css" href="./Qgis2threejs.css">
<script src="./threejs/three.min.js"></script>
<script src="./threejs/OrbitControls.js"></script>
<script src="./threejs/ViewHelper.js"></script>
<script src="./tweenjs/tween.js"></script>
<script src="./Qgis2threejs.js"></script>
<script src="./threejs/loaders/GLTFLoader.js"></script>
<script src="./dat-gui/dat.gui.min.js"></script>
<script src="./dat-gui_panel.js"></script>
</head>
<style>
  #layerpanel {
  left: 36px;
  top: 35px; 
}

#popup {
  right: 5px; 
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  }

  body {
  font-family: Arial, sans-serif;
  }

  .header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background-color: white;
  border-bottom: #05347e;
  border-style: outset;
  color: #05347e;
  }

  .header-title h1 {
  font-size: 1.5em;
  color: #05347e; 
  }

  .header-toolbar button img {
  width: 40px;
  height: 40px;
  /*transition: transform 0.2s;*/ 
  z-index: 1000
  }

  .header-toolbar button {
  background: navy;
  border: white;
  cursor: pointer;
  padding: 0;
  margin-left: 10px;
  }

  .header-toolbar button:hover img {
  transform: scale(1.1);
  }

  /* Hover effect */
    /* Hover effect with text */
    #ToggleButton::before {
    content: "Day/Night";
    opacity: 0;
    color: white;
    position: absolute;
    font-size: 12px;
    padding: 5px;
    background-color: #333;
    border-radius: 8px;
    white-space: nowrap;
    transition: opacity 0.3s ease;
    z-index: 1000;
  }

  #ToggleButton:hover::before {
    opacity: 1; /* Show text on hover */
  }

  /* TIMELINE STYLING */ 
 /* Hover effect */
    /* Hover effect with text */
    #timebtn::before {
    content: "UP Timeline";
    opacity: 0;
    color: white;
    position: absolute;
    font-size: 12px;
    padding: 5px;
    background-color: #333;
    border-radius: 8px;
    white-space: nowrap;
    transition: opacity 0.3s ease;
    z-index: 1000;
  }

  #timebtn:hover::before {
    opacity: 1; /* Show text on hover */
  }

  /* HELP BUTTON */ 
  #helpbtn::before {
    content: "Help";
    opacity: 0;
    color: white;
    position: absolute;
    font-size: 12px;
    padding: 5px;
    background-color: #333;
    border-radius: 8px;
    white-space: nowrap;
    transition: opacity 0.3s ease;
    z-index: 1000;
  }

  #helpbtn:hover::before {
    opacity: 1; /* Show text on hover */
  }

  /*SEARCH BUTTON*/ 
  #search::before {
    content: "Search";
    opacity: 0;
    color: white;
    position: absolute;
    font-size: 12px;
    padding: 5px;
    background-color: #333;
    border-radius: 8px;
    white-space: nowrap;
    transition: opacity 0.3s ease;
    z-index: 1000;
  }

  #search:hover::before {
    opacity: 1; /* Show text on hover */
  }

    /*mapButton (GATES)*/ 
  /* Hover effect with text */
  #mapButton::before {
    content: "University Entrances";
    opacity: 0;
    color: white;
    position: absolute;
    font-size: 12px;
    padding: 5px;
    background-color: #333;
    border-radius: 8px;
    white-space: nowrap;
    transition: opacity 0.3s ease;
    z-index: 1000;
  }

  #mapButton:hover::before {
    opacity: 1; /* Show text on hover */
  }

    /*HELP POP-UP STYLING*/ 
    .helpPopup1 {
    display: none; /* Hidden by default */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 85%;
    max-width: 600px;
    background-color: white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    z-index: 1000;
}

.popup-content1 {
    padding: 20px;
    text-align: center;
}

.close-button1 {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 30px;
    color: #333;
    cursor: pointer;
}

.close-button1:hover {
    color: red;
}

h2 {
    font-size: 24px;
    margin-bottom: 20px;
}


/*------------------------------------------------------------------search bar---------------------------------------------------------------------------------*/ 
#searchBar {
  display: none; /* Hide the search bar initially */
  background-color: #05347e;
  position: absolute;
  width: 425px; 
  top: 70px; /* Position below the header */
  right: 20px;
  padding: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 4px;
  z-index: 1000;
}

#searchInput {
  padding: 8px;
  font-size: 16px;
  color: #05347e;
  border: 1px solid #05347e;
  font-weight: bold;
  border-radius: 4px;
  flex-grow: 1;
  z-index: 1000;
}

#searchBtn, #closeBtn {
  padding: 8px 8px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  border: 1px solid #ccc;
  border-radius: 4px;
  z-index: 1000;
}

#closeBtn {
  background-color: #f44336;
  color: white;
  border-radius: 50%;
  z-index: 1000;
}

#searchBtn {
  background-color: #05347e;
  color: white;
  z-index: 1000;
}

#searchBtn:hover {
  
}


</style>

<!--------------------------------------CODE FOR THE CONTENTS OF THE HEADER (TITLE AND TOOLBAR)------------------------------------------------------------------>
<header class="header">
<div class="header-title">
  <h1>Welcome to the University of Pretoria: Hatfield Campus 3D Model</h1>
</div>
<div class="header-toolbar">
  <!----------------------------------------CODE FOR THE SEARCH BUTTON POP-UP----------------------------------------------------------------------------------------->
  <!-- Search bar (initially hidden) -->
  <div id="searchBar" class="search-bar">
    <input type="text" id="searchInput" placeholder="Search Building Name...">
    <button id="searchBtn">Search</button>
    <button id="closeBtn">&times;</button>
  </div>
<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->
  <button id="search"><img src="search.jpg" alt="Icon 5"></button>
  <button id="ToggleButton" onclick="toggleImage()"><img src="nigth.jpg" alt="Icon 2" data-alt="day.jpg"></button>
  <button id="mapButton" onclick="window.open('https://www.google.com/maps/d/edit?mid=11zfUtH3mfiyO_NSkuh3x2JkNXlwTkqI&usp=sharing', '_blank');">
    <img src="gate.jpg" alt="Icon 3">
  </button>
  <button id="timebtn"><img src="timeline.jpg" alt="Icon 4"></button>
  <button id ="helpbtn"><img src="help.jpg" alt="Icon 1"></button>
  
</div>
</header>
<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->

<!----------------------------------------CODE FOR THE HELP BUTTON POP-UP----------------------------------------------------------------------------------------->
<div id="helpPopup" class="helpPopup1">
  <div class="popup-content1">
      <button class="close-button" id="closeButton1">&times;</button>
      <h2>Instructions</h2>
      <p>Here are some helpful instructions for using this Web Map:</p>
      <p><img src="help_contents.jpg" alt="Instructions Image" width="550" height="500"></p>
  </div>
</div>
<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->






<body>
<div id="view">
  <div id="northarrow"></div>
  <div id="navigation"></div>
</div>

<!-- popup -->
<div id="popup">
  <div id="closebtn">&times;</div>
  <div id="popupbar"></div>
  <div id="popupbody">
    <div id="popupcontent"></div>

    <!-- query result -->
    <div id="queryresult">
      <table id="qr_coords_table">
        <caption>Clicked coordinates <div id="zoomtopoint" class="action-zoom zoombtn"></div></caption>
        <tr><td id="qr_coords"></td></tr>
      </table>

      <table id="qr_layername_table">
        <caption>Layer <div id="zoomtolayer" class="action-zoom zoombtn"></div></caption>
        <tr><td id="qr_layername"></td></tr>
      </table>

      <table id="qr_attrs_table">
        <caption>Attributes</caption>
      </table>

      <!-- camera actions and measure tool -->
      <div id="orbitbtn" class="action-btn action-orbit">Orbit</div>
      <div id="measurebtn" class="action-btn">Measure distance</div>
    </div>

    <!-- page info -->
    <div id="pageinfo">
      <h1>How to Navigate this Web Map:</h1>
      <table id="usage">
        <tr><td colspan="2" class="star">Mouse</td></tr>
        <tr><td>Left button + Move</td><td>Orbit</td></tr>
        <tr><td>Mouse Wheel</td><td>Zoom</td></tr>
        <tr><td>Right button + Move</td><td>Pan</td></tr>

        <tr><td colspan="2" class="star">Keys</td></tr>
        <tr><td>Arrow keys</td><td>Move Horizontally</td></tr>
        <tr><td>Shift + Arrow keys</td><td>Orbit</td></tr>
        <tr><td>Ctrl + Arrow keys</td><td>Rotate</td></tr>
        <tr><td>Shift + Ctrl + Up / Down</td><td>Zoom In / Out</td></tr>
        <tr><td>L</td><td>Toggle Label Visibility</td></tr>
        <tr><td>R</td><td>Start / Stop Orbit Animation</td></tr>
        <tr><td>W</td><td>Wireframe Mode</td></tr>
        <tr><td>Shift + R</td><td>Reset Camera Position</td></tr>
        <tr><td>Shift + S</td><td>Save Image</td></tr>
      </table>
    </div>
  </div>
</div>

<!-- progress bar -->
<div id="progress"><div id="progressbar"></div></div>


<!-- animation -->
<div id="narrativebox" class="ef1">
  <div id="narbody">

  </div>
  <div id="nextbtn"></div>
</div>

<script>
Q3D.Config.localMode = true;
Q3D.Config.animation.enabled = true;
Q3D.Config.animation.startOnLoad = true;
Q3D.Config.northArrow.enabled = true;
Q3D.Config.northArrow.color = 0xea1f05;

var container = document.getElementById("view"),
    app = Q3D.application,
    gui = Q3D.gui;

app.init(container);    // initialize viewer

// load the scene
app.loadSceneFile("./data/TheCMS3DModelNovindex/scene.js", function (scene) {
  // scene file has been loaded
  app.start();

  gui.dat.initLayersFolder(scene);

}, function (scene) {
  // all relevant files have been loaded

  if (Q3D.Config.gui.customPlane) {
    // specify preferred values. If not specified, z range of scene bounding box is used.
    var zMin = undefined,
        zMax = undefined;
    gui.dat.initCustomPlaneFolder(zMin, zMax);
  }
});

//-----------------------------------------------------------------------------------------------------------------//
  /*CODE FOR THE MODE BUTTUN - SWITCH BETWEEN DAY AND NIGHT*/ 
  const ToggleButton = document.getElementById('ToggleButton');
  ToggleButton.addEventListener('click', () => {
    document.getElementById('view').classList.toggle('dark'); // Toggle 'dark' class on #view element
  });

//-----------------------------------------------------------------------------------------------------------------//


//-----------------------------------------------------------------------------------------------------------------//
//CODE FOR THE HELP BUTTON POP-UP// 
// Get elements
const helpbtn = document.getElementById('helpbtn');
const helpPopup = document.getElementById('helpPopup');
const closeButton = document.getElementById('closeButton1');

// Show the popup when the Help button is clicked
helpbtn.addEventListener('click', function() {
    helpPopup.style.display = 'block';
});

// Close the popup when the close button is clicked
closeButton.addEventListener('click', function() {
    helpPopup.style.display = 'none';
});

// Close the popup if the user clicks anywhere outside of it
window.addEventListener('click', function(event) {
    if (event.target === helpPopup) {
        helpPopup.style.display = 'none';
    }
});
//-----------------------------------------------------------------------------------------------------------------//

//-----------------------------------------------------------------------------------------------------------------//
//CODE FOR THE SEARCH BAR//
// Get references to elements
const search = document.getElementById('search');
const searchBar = document.getElementById('searchBar');
const closeBtn = document.getElementById('closeBtn');

// When the 'searchbtn1' button is clicked, show the search bar
search.addEventListener('click', () => {
  searchBar.style.display = 'flex'; // Show the search bar
});

// When the 'closeBtn' button is clicked, hide the search bar
closeBtn.addEventListener('click', () => {
  searchBar.style.display = 'none'; // Hide the search bar
});

//-----------------------------------------------------------------------------------------------------------------//


</script>
</body>
</html>
